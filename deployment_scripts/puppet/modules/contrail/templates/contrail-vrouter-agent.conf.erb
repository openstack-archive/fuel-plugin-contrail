[CONTROL-NODE]
[DEFAULT]
log_file=/var/log/contrail/contrail-vrouter-agent.log
log_level=SYS_NOTICE
log_local=1
headless_mode=true
<%- if scope.lookupvar('contrail::dpdk_enabled') == true then -%>
platform=dpdk
physical_interface_address=<%= scope.lookupvar('contrail::phys_dev_pci') %>
<% phys_dev_fact = scope.lookupvar('contrail::phys_dev').gsub(/[^a-z0-9_]/i,"_") -%>
physical_interface_mac=<%= scope.lookupvar("macaddress_#{ phys_dev_fact }") %>
<%- end -%>
[DISCOVERY]
server=<%= scope.lookupvar('contrail::contrail_private_vip') %>
max_control_nodes=2
[DNS]
[HYPERVISOR]
type=kvm
[FLOWS]
[METADATA]
metadata_proxy_secret=<%= scope.lookupvar('contrail::metadata_secret') %>
[NETWORKS]
control_network_ip=<%= scope.lookupvar('contrail::address') %>
[VIRTUAL-HOST-INTERFACE]
name=vhost0
ip=<%= scope.lookupvar('contrail::address') %>/<%= scope.lookupvar('contrail::netmask_short') %>
physical_interface=<%= scope.lookupvar('contrail::phys_dev') %>
<% if scope.lookupvar('contrail::gateway') != :undef -%>
gateway=<%= scope.lookupvar('contrail::gateway') %>
<% end -%>
[GATEWAY-0]
[GATEWAY-1]
[SERVICE-INSTANCE]
netns_command=/usr/bin/opencontrail-vrouter-netns
